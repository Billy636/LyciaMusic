ğŸ“‚ v1.2 æ–°å¢åŠŸèƒ½éœ€æ±‚æ–‡æ¡£ï¼šéŸ³ä¹å·¥å…·ç®± (Music Toolbox)
1. åŠŸèƒ½å…¥å£ (Entry Point)
åœ¨ è®¾ç½® (Settings) é¡µé¢ä¸­ï¼Œæ–°å¢ä¸€ä¸ªç‹¬ç«‹çš„ Tabï¼Œå‘½åä¸º â€œå·¥å…·ç®±â€ (Toolbox)ã€‚

å®šä½ï¼š é¢å‘è¿›é˜¶ç”¨æˆ·çš„æ‰¹é‡å¤„ç†ä¸­å¿ƒã€‚

ä¸»è¦æ¨¡å—ï¼š

æœ¬åœ°æ–‡ä»¶é‡å‘½å (File Renamer)

å…ƒæ•°æ®åŒ¹é…åˆ®å‰Š (Metadata Fetcher) [é¢„ç•™ä½ç½®ï¼Œåç»­è¿­ä»£]

2. æ ¸å¿ƒåŠŸèƒ½ï¼šæœ¬åœ°æ–‡ä»¶é‡å‘½å (File Renamer)
æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªå¼ºå¤§çš„é‡å‘½åå¼•æ“ï¼Œæ”¯æŒâ€œåŸºäºæ ‡ç­¾â€å’Œâ€œåŸºäºè§„åˆ™â€ä¸¤ç§æ¨¡å¼ã€‚

2.1 æ“ä½œæ¨¡å¼ (Operation Modes) è¯·æä¾›ä¸€ä¸ªå•é€‰ç»„ (Radio Group)ï¼Œè®©ç”¨æˆ·å†³å®šé‡å‘½åçš„æ•°æ®æ¥æºï¼š

âšª æ¨¡å¼ Aï¼šæ ‡å‡†åŒ–é‡å‘½å (Standardize via Tags)

é€»è¾‘ï¼š è¯»å–æ–‡ä»¶çš„å…ƒæ•°æ® (Metadata)ï¼ŒæŒ‰ç…§ç”¨æˆ·æŒ‡å®šçš„æ¨¡æ¿é‡å‘½åæ–‡ä»¶ã€‚

å‰ç½®æ¡ä»¶ï¼š æ–‡ä»¶å¿…é¡»åŒ…å«å®Œæ•´çš„æ ‡ç­¾ä¿¡æ¯ã€‚å¦‚æœæ ‡ç­¾ç¼ºå¤±ï¼Œæ ‡è®°ä¸ºâ€œè·³è¿‡â€ã€‚

âšª æ¨¡å¼ Bï¼šæ–‡ä»¶åæ¸…æ´— (Clean via Rules)

é€»è¾‘ï¼š ä»…å¯¹å½“å‰æ–‡ä»¶åè¿›è¡Œå­—ç¬¦ä¸²ä¿®å‰ªï¼ˆå»é™¤åºå·ç­‰ï¼‰ï¼Œä¸ä¾èµ–æ ‡ç­¾ã€‚

é€‚ç”¨åœºæ™¯ï¼š ç”¨æˆ·æ²¡æœ‰æ ‡ç­¾ï¼Œåªæƒ³å•çº¯å»æ‰æ–‡ä»¶åçš„ 01. å‰ç¼€ã€‚

ğŸ”˜ æ¨¡å¼ Cï¼šæ™ºèƒ½è‡ªåŠ¨ (Auto / Hybrid) [é»˜è®¤]

é€»è¾‘ï¼š ä¼˜å…ˆå°è¯•æ¨¡å¼ Aï¼›å¦‚æœæ ‡ç­¾ç¼ºå¤±ï¼Œè‡ªåŠ¨é™çº§æ‰§è¡Œæ¨¡å¼ Bã€‚

2.2 å‘½åæ¨¡æ¿ç³»ç»Ÿ (Modern Template System) ä»…é’ˆå¯¹â€œæ¨¡å¼ Aâ€ç”Ÿæ•ˆ

ä¸ºäº†æ›¿ä»£è€æ—§çš„ @1 @2 è¯­æ³•ï¼Œè¯·å®ç°åŸºäºå ä½ç¬¦çš„æ¨¡æ¿ç³»ç»Ÿã€‚ è¯·æä¾›ä»¥ä¸‹é¢„è®¾é€‰é¡¹ + è‡ªå®šä¹‰è¾“å…¥æ¡†ï¼š

[ ] æ­Œå - æ­Œæ‰‹ (ä¾‹å¦‚ï¼šä¸ƒé‡Œé¦™ - å‘¨æ°ä¼¦)

æ¨¡æ¿ï¼š{title} - {artist}

[ ] æ­Œæ‰‹ - æ­Œå (ä¾‹å¦‚ï¼šå‘¨æ°ä¼¦ - ä¸ƒé‡Œé¦™)

æ¨¡æ¿ï¼š{artist} - {title}

[ ] è½¨é“. æ­Œå (ä¾‹å¦‚ï¼š01. ä¸ƒé‡Œé¦™)

æ¨¡æ¿ï¼š{track}. {title}

[ ] è‡ªå®šä¹‰æ ¼å¼ (è¾“å…¥æ¡†)

å…è®¸ç”¨æˆ·è¾“å…¥ä»»æ„å­—ç¬¦å’Œå˜é‡ã€‚

æ”¯æŒçš„å˜é‡ (Variables):

{title} : æ ‡é¢˜

{artist} : è‰ºæœ¯å®¶

{album} : ä¸“è¾‘

{year} : å¹´ä»½

{track} : è½¨é“å· (å…³é”®ï¼š å¿…é¡»è‡ªåŠ¨è¡¥é›¶ï¼Œä¾‹å¦‚ 1 -> 01, 12 -> 12)

âš ï¸ å®‰å…¨æ€§è¦æ±‚ (Sanitization): åœ¨ç”Ÿæˆæ–‡ä»¶åæ—¶ï¼Œå¿…é¡»è‡ªåŠ¨æ£€æµ‹å¹¶æ›¿æ¢ Windows éæ³•å­—ç¬¦ (\ / : * ? " < > |)ã€‚

å»ºè®®æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ _ æˆ–å…¨è§’ç¬¦å·ã€‚

Case: {title} ä¸º Love/Hate -> æ–‡ä»¶ååº”å˜ä¸º Love_Hate.mp3ã€‚

2.3 æ¸…æ´—è§„åˆ™ (Cleaning Rules) ä»…é’ˆå¯¹â€œæ¨¡å¼ Bâ€ç”Ÿæ•ˆ

æä¾›å¤é€‰æ¡†ä¾›ç”¨æˆ·é€‰æ‹©æ¸…æ´—è§„åˆ™ï¼ˆæ­£åˆ™åŒ¹é…æ–‡ä»¶å¤´éƒ¨ï¼‰ï¼š

[x] å»é™¤åºå·å‰ç¼€ (Regex: ^\d+[\.\-\s]+)

è¦†ç›–ï¼š01. Song, 02 - Song, 03 Song

[ ] å»é™¤æ¥æºå‰ç¼€ (Regex: ^\[.*?\]\s*)

è¦†ç›–ï¼š[ç½‘æ˜“äº‘] Song

3. è¾…åŠ©é€»è¾‘ï¼šéšå½¢æ¸…æ´—ä¸æœç´¢ (Silent Cleaning Logic)
è¿™æ˜¯ä¸ºäº†é…åˆâ€œå…ƒæ•°æ®åŒ¹é…â€åŠŸèƒ½çš„åº•å±‚é€»è¾‘ä¼˜åŒ–

å½“æœªæ¥æ‰§è¡Œâ€œåŒ¹é…æ ‡ç­¾â€æˆ–â€œæœç´¢æ­Œè¯â€æ“ä½œæ—¶ï¼Œä¸éœ€è¦å…ˆå¼ºåˆ¶ç”¨æˆ·æ”¹åã€‚è¯·åœ¨å†…å­˜ä¸­æ‰§è¡Œâ€œéšå½¢æ¸…æ´—â€ï¼š

è¯»å–æ–‡ä»¶åï¼š 01. ä¸ƒé‡Œé¦™.mp3

å†…å­˜é¢„å¤„ç†ï¼š åº”ç”¨ä¸Šè¿°çš„ ^\d+[\.\-\s]+ æ­£åˆ™ï¼Œæå–å‡ºå…³é”®è¯ ä¸ƒé‡Œé¦™ã€‚

API è¯·æ±‚ï¼š ä½¿ç”¨æ¸…æ´—åçš„å…³é”®è¯ ä¸ƒé‡Œé¦™ å»è¯·æ±‚ iTunes/MusicBrainz æ¥å£ã€‚

ç›®çš„ï¼š æé«˜æœç´¢å‡†ç¡®ç‡ï¼ŒåŒæ—¶ä¸ç ´åç”¨æˆ·çš„åŸå§‹æ–‡ä»¶ï¼ˆé™¤éç”¨æˆ·æ˜¾å¼è¦æ±‚é‡å‘½åï¼‰ã€‚

4. äº¤äº’æµç¨‹ä¸å®‰å…¨ (UX & Safety)
ğŸš« ä¸¥ç¦é™é»˜ä¿®æ”¹ï¼æ‰€æœ‰æ‰¹é‡æ“ä½œå¿…é¡»ç»è¿‡é¢„è§ˆã€‚

é€‰æ‹©ç›®æ ‡ï¼š ç”¨æˆ·åœ¨è®¾ç½®é¡µé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ–è€…åœ¨ä¾§è¾¹æ å³é”®é€‰æ‹©â€œæ‰¹é‡æ•´ç†â€ã€‚

é…ç½®å‚æ•°ï¼š ç”¨æˆ·é€‰æ‹©æ¨¡å¼ï¼ˆA/B/Cï¼‰å’Œæ¨¡æ¿ã€‚

ç‚¹å‡»â€œæ‰«æâ€ï¼š

å¼¹å‡º é¢„è§ˆæ¨¡æ€æ¡† (Preview Modal)ã€‚

æ˜¾ç¤ºè¡¨æ ¼ï¼š[çŠ¶æ€å›¾æ ‡] | åŸæ–‡ä»¶å | -> | æ–°æ–‡ä»¶åé¢„è§ˆ

çŠ¶æ€åˆ†ç±»ï¼š

âœ¨ (ç»¿è‰²)ï¼šå°†æ ¹æ®æ ‡ç­¾é‡å‘½åã€‚

âœ‚ï¸ (é»„è‰²)ï¼šå°†æ ¹æ®è§„åˆ™æ¸…æ´—ã€‚

âš ï¸ (çº¢è‰²/ç°è‰²)ï¼šæ— æ ‡ç­¾ä¸”ä¸åŒ¹é…è§„åˆ™ï¼Œå°†è·³è¿‡ã€‚

æœ€ç»ˆæ‰§è¡Œï¼š ç”¨æˆ·æ£€æŸ¥æ— è¯¯åï¼Œç‚¹å‡»â€œåº”ç”¨ä¿®æ”¹â€ï¼Œåç«¯æ‰§è¡Œ fs::renameã€‚


Important notes:
it is Tauri v2.0,please remember it !

While making these changes, please ensure that none of the existing features stop working.

Do not make any single file excessively long. Use a refactoring-oriented approach so that the codebase remains clean, modular, and easy to manage and read.