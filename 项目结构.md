# é¡¹ç›®æ±‡æ€»æŠ¥å‘Š

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

- **æ ¹ç›®å½•/**
  - `package.json`: Node.js ä¾èµ–ç®¡ç†ä¸è„šæœ¬é…ç½®ã€‚
  - `vite.config.ts`: Vite æ„å»ºå·¥å…·é…ç½®ã€‚
  - `tailwind.config.js`: Tailwind CSS æ ·å¼æ¡†æ¶é…ç½®ã€‚
  - `tsconfig.json`: TypeScript å…¨å±€ç¼–è¯‘é…ç½®ã€‚
  - `tauri.conf.json`: Tauri æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‚
  - `index.html`: å•é¡µé¢å…¥å£ã€‚
  - `README.md`: é¡¹ç›®è¯´æ˜æ–‡æ¡£ã€‚
  - `.gitignore`: Git å¿½ç•¥è§„åˆ™ã€‚
  - **.vscode/**: VS Code ç¼–è¾‘å™¨æ’ä»¶ä¸å·¥ä½œåŒºè®¾ç½®ã€‚
  - **public/**: å­˜æ”¾æ— éœ€ç¼–è¯‘çš„åŸå§‹é™æ€èµ„æºï¼ˆå¦‚ `tauri.svg`, `vite.svg`ï¼‰ã€‚
  - **src/**: å‰ç«¯æ ¸å¿ƒæºç ç›®å½•ã€‚
    - **assets/**: å­˜æ”¾é™æ€èµ„æºï¼ˆå¦‚ `vue.svg`ï¼‰ã€‚
    - **components/**: å„ç§åŠŸèƒ½ç»„ä»¶å­˜æ”¾åœ°ã€‚
      - **common/**: é€šç”¨ UI åŸºç¡€ç»„ä»¶ï¼ˆ`DragGhost.vue`, `FavoritesGrid.vue`ï¼‰ã€‚
      - **layout/**: é¡µé¢æ¡†æ¶å¸ƒå±€ç»„ä»¶ï¼ˆ`Sidebar.vue`, `TitleBar.vue`, `PlayerFooter.vue`, `GlobalBackground.vue`ï¼‰ã€‚
      - **overlays/**: æµ®å±‚ä¸äº¤äº’åé¦ˆç»„ä»¶ï¼ˆ`AddToPlaylistModal.vue`, `ConfirmModal.vue`, `SongContextMenu.vue` ç­‰ï¼‰ã€‚
      - **player/**: æ’­æ”¾è¯¦æƒ…ä¸é˜Ÿåˆ—ç›¸å…³ç»„ä»¶ï¼ˆ`PlayerDetail.vue`, `PlayQueueSidebar.vue`, `DesktopLyrics.vue`ï¼‰ã€‚
      - **settings/**: è®¾ç½®ç›¸å…³ç»†åˆ†ç»„ä»¶ï¼ˆ`SettingsGeneral.vue`, `SettingsTheme.vue`, `CustomSkinModal.vue`ï¼‰ã€‚
      - **song-list/**: éŸ³ä¹åˆ—è¡¨ç®¡ç†æ ¸å¿ƒï¼ˆ`SongList.vue`, `SongTable.vue`, `SongListHeader.vue`, `SongListSidebar.vue`ï¼‰ã€‚
    - **composables/**: é€»è¾‘å°è£…ä¸çŠ¶æ€ç®¡ç†ï¼ˆ`playerState.ts`, `player.ts`, `lyrics.ts`ï¼‰ã€‚
    - **router/**: è·¯ç”±ç®¡ç† (`index.ts`)ã€‚
    - **types/**: **[æ–°å¢]** TypeScript ç±»å‹å®šä¹‰ã€‚
      - `index.ts`: é›†ä¸­ç®¡ç†å…¨é¡¹ç›®çš„æ¥å£å®šä¹‰ï¼ˆSong, Playlist, AppSettings ç­‰ï¼‰ã€‚
    - **views/**: å®Œæ•´è§†å›¾é¡µé¢ã€‚
      - `Home.vue`: **[æ–°å¢]** é¦–é¡µè§†å›¾å®¹å™¨ã€‚
      - `Favorites.vue`: **[æ–°å¢]** æ”¶è—å¤¹è§†å›¾å®¹å™¨ã€‚
      - `Recent.vue`: **[æ–°å¢]** æœ€è¿‘æ’­æ”¾è§†å›¾å®¹å™¨ã€‚
      - `Artists.vue`: æ­Œæ‰‹èšåˆå±•ç¤ºé¡µã€‚
      - `Albums.vue`: ä¸“è¾‘èšåˆå±•ç¤ºé¡µã€‚
      - `Settings.vue`: å…¨å±€è®¾ç½®é¡µé¢å®¹å™¨ã€‚
    - `App.vue`: æ ¹ç»„ä»¶ã€‚
    - `main.ts`: åº”ç”¨å…¥å£å¯åŠ¨æ–‡ä»¶ã€‚
  - **src-tauri/**: Tauri æ¡Œé¢åº”ç”¨åç«¯ Rust æºç ã€‚
    - **src/**: Rust æ ¸å¿ƒé€»è¾‘ã€‚
      - `main.rs`: åç«¯æœåŠ¡å…¥å£ã€‚
      - `lib.rs`: å¯¼å‡ºä¾›å‰ç«¯è°ƒç”¨çš„æŒ‡ä»¤æ¥å£ã€‚
      - `error.rs`: **[æ–°å¢]** ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å— (`CommandError`)ã€‚
      - `player.rs`: åç«¯éŸ³é¢‘æ’­æ”¾å¼•æ“å°è£…ã€‚
      - `music.rs`: éŸ³ä¹æ–‡ä»¶å…ƒæ•°æ®å¤„ç†é€»è¾‘ã€‚
      - `database.rs`: æœ¬åœ°é…ç½®ä¸æ•°æ®æŒä¹…åŒ–å¤„ç†ã€‚
    - **capabilities/**: åº”ç”¨æƒé™èƒ½åŠ›é…ç½®ã€‚
    - **icons/**: å„å¹³å°åº”ç”¨å›¾æ ‡ã€‚
    - `Cargo.toml`: Rust é¡¹ç›®ä¾èµ–ç®¡ç†ã€‚
    - `build.rs`: Tauri æ„å»ºè„šæœ¬ã€‚

---

## ğŸ“„ src æ–‡ä»¶å¤¹è¯¦ç»†åŠŸèƒ½æ±‡æ€»

### å…¨å±€å®šä¹‰ (types/)
- **index.ts**: **[æ ¸å¿ƒ]** é¡¹ç›®çš„ TypeScript ç±»å‹ä¸­å¿ƒã€‚é›†ä¸­å®šä¹‰äº† `Song`, `Playlist`, `HistoryItem`, `AppSettings` ç­‰æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œä¾›å‰ç«¯å„æ¨¡å—ç»Ÿä¸€å¼•ç”¨ï¼Œè§£å†³äº†å¾ªç¯ä¾èµ–é—®é¢˜ã€‚

### è·¯ç”±ç®¡ç† (router/)
- **index.ts**: è·¯ç”±é…ç½®æ–‡ä»¶ã€‚æ›´æ–°äº†è·¯ç”±å®šä¹‰ï¼Œä½¿å…¶æŒ‡å‘ç‹¬ç«‹çš„è§†å›¾ç»„ä»¶ï¼ˆå¦‚ `Home.vue`, `Favorites.vue`ï¼‰ï¼Œè€Œä¸å†åªæ˜¯ç®€å•çš„ç»„ä»¶åˆ«åã€‚

### é€»è¾‘å¤„ç†ä¸çŠ¶æ€ç®¡ç† (composables/)
- **playerState.ts**: å®šä¹‰å…¨å±€å…±äº«çš„å“åº”å¼çŠ¶æ€ã€‚**å·²é‡æ„**ï¼Œå¼•ç”¨ `src/types/index.ts` ä¸­çš„ç±»å‹å®šä¹‰ï¼Œä¿æŒäº†å¯¹æ—§ä»£ç çš„å…¼å®¹æ€§ã€‚
- **player.ts**: æ ¸å¿ƒæ’­æ”¾å™¨é€»è¾‘ã€‚å°è£… Tauri API è°ƒç”¨ï¼ˆæ’­æ”¾ã€æš‚åœã€æ–‡ä»¶æ“ä½œç­‰ï¼‰ï¼Œå¹¶è´Ÿè´£ä¸åç«¯äº¤äº’æ—¶çš„é”™è¯¯å¤„ç†ï¼ˆé€‚é…äº†æ–°çš„ `CommandError` ç»“æ„ï¼‰ã€‚
- **lyrics.ts**: æ­Œè¯å¤„ç†é€»è¾‘ã€‚è´Ÿè´£æ­Œè¯çš„ä¸‹è½½ã€è§£æä¸åŒæ­¥ã€‚

### è§†å›¾é¡µé¢ (views/)
- **Home.vue / Favorites.vue / Recent.vue**: **[æ–°æ¶æ„]** é’ˆå¯¹ç‰¹å®šè·¯ç”±çš„ä¸“ç”¨åŒ…è£…ç»„ä»¶ï¼Œæ˜ç¡®äº†é¡µé¢å±‚çº§ç»“æ„ï¼Œæ›¿ä»£äº†åŸå…ˆå¤ç”¨ `SongList` çš„è·¯ç”±é…ç½®æ–¹å¼ã€‚
- **Artists.vue / Albums.vue**: æ­Œæ‰‹ä¸ä¸“è¾‘çš„èšåˆå±•ç¤ºè§†å›¾ã€‚
- **Settings.vue**: è®¾ç½®ä¸­å¿ƒé¡µé¢ã€‚

### ç»„ä»¶ (components/)

#### æ’­æ”¾ç›¸å…³ (player/)
- **PlayQueueSidebar.vue**: **[æ–°å¢/è¿ç§»]** æ’­æ”¾é˜Ÿåˆ—ä¾§è¾¹æ ï¼Œæ”¯æŒæ»‘å‡ºå±•ç¤ºã€æ¸…ç©ºé˜Ÿåˆ—åŠç§»é™¤å•æ›²ã€‚

#### æ­Œæ›²åˆ—è¡¨ç›¸å…³ (song-list/)
- **SongList.vue**: æ­Œæ›²åˆ—è¡¨ä¸»å®¹å™¨ã€‚**å·²æ›´æ–°**ï¼Œåœ¨å¤„ç†æ‰¹é‡æ–‡ä»¶ç§»åŠ¨ç­‰æ“ä½œæ—¶ï¼Œå¢åŠ äº†å¯¹åç«¯æ–°é”™è¯¯ç»“æ„ï¼ˆ`code`, `message`ï¼‰çš„è§£æä¸åé¦ˆæ”¯æŒã€‚

#### å¸ƒå±€ä¸å…¬å…±ç»„ä»¶
- **Sidebar.vue**: ä¾§è¾¹å¯¼èˆªæ ï¼Œé…åˆæ–°è·¯ç”±ç»“æ„è¿›è¡Œå¯¼èˆªè·³è½¬ã€‚
- **TitleBar.vue**, **PlayerFooter.vue**, **GlobalBackground.vue**: ä¿æŒåŸæœ‰çš„å¸ƒå±€ä¸æ’­æ”¾æ§åˆ¶åŠŸèƒ½ã€‚

### Tauri åç«¯ (src-tauri/src/)
- **error.rs**: **[æ–°å¢]** å®šä¹‰äº† `CommandError` ç»“æ„ä½“ï¼Œç”¨äºåœ¨ Rust ç«¯ç»Ÿä¸€åºåˆ—åŒ–é”™è¯¯ä¿¡æ¯è¿”å›ç»™å‰ç«¯ã€‚
- **music.rs**: éŸ³ä¹ç®¡ç†é€»è¾‘ã€‚`batch_move_music_files` ç­‰æ ¸å¿ƒæŒ‡ä»¤å·²æ›´æ–°ï¼Œä½¿ç”¨ `Result<T, CommandError>` è¿”å›ç±»å‹ï¼Œæä¾›æ›´ç²¾å‡†çš„é”™è¯¯è¯Šæ–­ã€‚
- **lib.rs**: æ³¨å†Œäº†æ–°çš„ `error` æ¨¡å—ï¼Œå¹¶é›†æˆäº† `tauri-plugin-dialog` å’Œ `tauri-plugin-opener` ç­‰æ’ä»¶ã€‚