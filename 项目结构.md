# 项目汇总报告

## 📁 项目目录结构说明

- **根目录/**
  - `package.json`: Node.js 依赖管理与脚本配置。
  - `vite.config.ts`: Vite 构建工具配置。
  - `tailwind.config.js`: Tailwind CSS 样式框架配置。
  - `tsconfig.json`: TypeScript 全局编译配置。
  - `tauri.conf.json`: Tauri 核心配置文件。
  - `index.html`: 单页面入口。
  - `README.md`: 项目说明文档。
  - `.gitignore`: Git 忽略规则。
  - **.vscode/**: VS Code 编辑器插件与工作区设置。
  - **public/**: 存放无需编译的原始静态资源（如 `tauri.svg`, `vite.svg`）。
  - **src/**: 前端核心源码目录。
    - **assets/**: 存放静态资源。
      - `vue.svg`: Vue 标志图标。
    - **components/**: 各种功能组件存放地。
      - **common/**: 通用 UI 基础组件。
        - `DragGhost.vue`: 拖拽时的跟随残影组件。
        - `FavoritesGrid.vue`: 收藏页面的网格布局组件。
      - **layout/**: 页面框架布局组件。
        - `Sidebar.vue`: 应用左侧主导航栏。
        - `TitleBar.vue`: 自定义窗口标题栏（含搜索、控制按钮）。
        - `PlayerFooter.vue`: 底部播放控制区域。
        - `GlobalBackground.vue`: 全局动态背景。
      - **overlays/**: 浮层与交互反馈组件。
        - `AddToPlaylistModal.vue`: 添加到歌单对话框。
        - `SongContextMenu.vue`: 歌曲项右键菜单。
        - `FolderContextMenu.vue`: 文件夹右键菜单。
        - `MoveToFolderModal.vue`: 移动文件确认弹窗。
        - `ConfirmModal.vue`: 通用确认对话框。
      - **player/**: 播放详情相关组件。
        - `PlayerDetail.vue`: 全屏播放详情页。
        - `DesktopLyrics.vue`: 桌面/嵌入式歌词显示组件。
      - **settings/**: 设置相关细分组件。
        - `SettingsGeneral.vue`: 通用业务逻辑设置。
        - `SettingsTheme.vue`: 外观与主题自定义设置。
        - `CustomSkinModal.vue`: 自定义皮肤更换弹窗。
      - **song-list/**: 音乐列表管理核心。
        - `SongList.vue`: 歌曲列表主容器。
        - `SongTable.vue`: 基于虚拟滚动的核心数据表格。
        - `SongListHeader.vue`: 列表顶部操作工具栏。
        - `SongListSidebar.vue`: 列表内部的维度筛选导航。
    - **composables/**: 逻辑封装与状态管理。
      - `playerState.ts`: 定义全局播放器状态。
      - `player.ts`: 封装核心播放控制与 API 调用逻辑。
      - `lyrics.ts`: 处理歌词下载、解析与同步逻辑。
    - **router/**: 路由管理。
      - `index.ts`: 定义应用的所有页面导航路径。
    - **views/**: 完整视图页面。
      - `Playlist.vue`: 歌单/歌曲展示主页面。
      - `Artists.vue`: 歌手聚合展示页。
      - `Albums.vue`: 专辑聚合展示页。
      - `Settings.vue`: 全局设置页面容器。
    - `App.vue`: 根组件。
    - `main.ts`: 应用入口启动文件。
  - **src-tauri/**: Tauri 桌面应用后端 Rust 源码。
    - **src/**: Rust 核心逻辑。
      - `main.rs`: 后端服务入口。
      - `lib.rs`: 导出供前端调用的指令接口。
      - `player.rs`: 后端音频播放引擎封装。
      - `music.rs`: 音乐文件元数据处理逻辑。
      - `database.rs`: 本地配置与数据持久化处理。
    - **capabilities/**: 应用权限能力配置。
    - **icons/**: 各平台应用图标。
    - `Cargo.toml`: Rust 项目依赖管理。
    - `build.rs`: Tauri 构建脚本。

---

## 📄 src 文件夹详细功能汇总
- **main.ts**: 应用程序的入口文件，负责初始化 Vue 实例、挂载路由（Router）并启动应用。
- **App.vue**: 根组件，定义了应用的主体布局（侧边栏、标题栏、播放控制栏、全局背景），并统一管理全局弹窗（如“添加到歌单”弹窗）。
- **style.css**: 全局样式表，包含 Tailwind CSS 的基础配置及全局滚动条等样式定制。
- **vite-env.d.ts**: Vite 环境类型定义文件，确保 TypeScript 能识别特定的环境变量和资源导入。

## 路由管理 (router/)
- **index.ts**: 路由配置文件，定义了本地音乐、收藏、最近播放、歌手、专辑及设置等页面的路径跳转逻辑。

## 逻辑处理与状态管理 (composables/)
- **playerState.ts**: 定义了全局共享的响应式状态，包括当前歌曲信息、播放状态、音量、播放模式、歌单列表、设置信息以及拖拽状态等。
- **player.ts**: 核心播放器逻辑。封装了与 Tauri 后端通信的方法（如播放、暂停、切歌、音量调节、文件扫描等），并管理历史记录、收藏夹及本地缓存逻辑。
- **lyrics.ts**: 歌词处理逻辑。负责从后端获取歌词、解析 `.lrc` 格式内容，并根据当前播放时间计算高亮歌词行。

## 视图页面 (views/)
- **Playlist.vue**: 歌单详情视图，展示特定歌单或过滤条件下的歌曲列表。
- **Artists.vue**: 歌手列表视图，展示所有歌手及其歌曲数量。
- **Albums.vue**: 专辑列表视图，按专辑维度展示音乐收藏。
- **Settings.vue**: 设置中心页面，聚合了通用设置和外观主题设置。

## 组件 (components/)

### 布局相关 (layout/)
- **Sidebar.vue**: 侧边导航栏。提供本地音乐、收藏、文件夹、自定义歌单的快速访问入口。
- **TitleBar.vue**: 自定义窗口标题栏。包含后退按钮、搜索框、设置入口以及窗口最小化/最大化/关闭控件。
- **PlayerFooter.vue**: 底部播放控制条。包含进度条、歌曲封面信息、播放/暂停/快进控制、播放模式切换、音量调节及桌面歌词开关。
- **GlobalBackground.vue**: 全局动态背景组件，支持磨砂玻璃效果和动态模糊背景。

### 歌曲列表相关 (song-list/)
- **SongList.vue**: 歌曲列表的主容器组件，整合了侧边栏过滤、列表头部和数据表格。
- **SongTable.vue**: 核心数据展示组件。采用**虚拟滚动技术**以支持海量音乐的高性能显示，并集成了复杂的拖拽选择、排序、右键菜单及封面按需加载逻辑。
- **SongListHeader.vue**: 列表顶部工具栏。提供批量播放、批量删除、移动文件、开启批量模式等操作按钮。
- **SongListSidebar.vue**: 列表内部的次级导航，支持按歌手、专辑、最近播放等维度对当前列表进行二次筛选。

### 播放器相关 (player/)
- **PlayerDetail.vue**: 播放详情全屏页。展示大尺寸专辑封面、滚动歌词及详细的歌曲元数据。
- **DesktopLyrics.vue**: 悬浮或内嵌的桌面歌词组件，支持样式自定义。

### 弹窗与交互 (overlays/)
- **SongContextMenu.vue**: 歌曲项的右键菜单。提供播放、添加到歌单、整理文件等快捷操作。
- **AddToPlaylistModal.vue**: 将选中的单首或多首歌曲加入到指定歌单的交互弹窗。
- **MoveToFolderModal.vue**: 批量移动文件到物理文件夹的确认弹窗。
- **ConfirmModal.vue**: 通用的二次确认对话框组件。
- **FolderContextMenu.vue**: 侧边栏文件夹项的专用右键菜单。

### 设置相关 (settings/)
- **SettingsGeneral.vue**: 管理文件自动整理规则、存储路径等通用业务逻辑设置。
- **SettingsTheme.vue**: 管理外观模式（亮/暗）、背景透明度、模糊度等主题设置。
- **CustomSkinModal.vue**: 用于自定义皮肤或背景图片的配置弹窗。

### 公共组件 (common/)
- **DragGhost.vue**: 歌曲拖拽过程中跟随鼠标的虚拟“残影”组件，提升交互体验。
- **FavoritesGrid.vue**: 收藏页面专用的网格展示组件。
